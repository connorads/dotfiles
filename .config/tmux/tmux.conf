##### Minimal, portable tmux config (close to defaults) #####

# Faster Escape handling (helps vim/vi feel snappier inside tmux)
set -sg escape-time 10

# Big scrollback (useful on servers)
set -g history-limit 200000

# Mouse: scroll, select panes, resize panes
# If you hate mouse behaviour later, set this to "off".
set -g mouse on

# Make the status bar more readable and include session/window info + host/time
set -g status-interval 5
set -g status-left  " [#S] "
set -g status-right " #h | %Y-%m-%d %H:%M "

# Base indexes start at 1 (nicer than 0 for humans)
set -g base-index 1
setw -g pane-base-index 1

##### Keybinds (still using default prefix Ctrl-b) #####

# Reload config quickly
bind r source-file ~/.config/tmux/tmux.conf \; display-message "tmux.conf reloaded"

# More mnemonic splits:
# - '|' = vertical split (side-by-side)
# - '-' = horizontal split (top/bottom)
unbind %
unbind '"'
bind | split-window -h
bind - split-window -v

# Vim-style pane navigation (prefix + h/j/k/l)
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Window switching without prefix (Alt + [ / ])
bind -n M-[ previous-window
bind -n M-] next-window

# Last window toggle
bind Tab last-window

# Pane navigation without prefix (Alt + h/j/k/l)
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

# Optional: create windows/panes in the current working directory
# (tmux 1.9+; widely available, but comment out if you hit issues)
bind c new-window -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

##### Quality-of-life #####

# Renumber windows when one is closed (keeps numbers tidy)
set -g renumber-windows on

# Don't delay after hitting prefix
set -g repeat-time 300

##### Clipboard (OSC 52) #####

# Enable copy to local clipboard over SSH via OSC 52 escape sequence
# Works with kitty, lazygit, neovim, and other OSC 52-aware tools
set -s set-clipboard on
set -g allow-passthrough on

##### Help popup #####

# Show custom keybindings help (Ctrl+b ?)
bind-key ? display-popup -E -w 60 -h 30 'gum pager <<EOF
  WINDOWS
  Alt+[/]          prev/next window
  Ctrl+b 1-9       go to window N
  Ctrl+b Tab       last window
  Ctrl+b c         new window
  Ctrl+b ,         rename window
  Ctrl+b &         kill window

  PANES
  Alt+h/j/k/l      navigate panes
  Ctrl+b |         split vertical
  Ctrl+b -         split horizontal
  Ctrl+b z         zoom pane
  Ctrl+d           close pane (exit shell)
  Ctrl+b x         kill pane

  OTHER
  Ctrl+b d         detach
  Ctrl+b [         scroll/copy mode
  Ctrl+b r         reload config
  Ctrl+b ?         this help

  Mouse: click, scroll, drag borders
EOF
'

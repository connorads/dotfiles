#!/usr/bin/env zsh
# ai-usage: combined Claude + Codex API usage
# alias: aiu
emulate -L zsh

local has_output=0

if command -v claude-usage &>/dev/null || typeset -f claude-usage &>/dev/null || [[ -f ~/.config/zsh/functions/claude-usage ]]; then
  printf '\033[1;34m── Claude ──\033[0m\n'
  autoload -Uz claude-usage 2>/dev/null
  claude-usage
  has_output=1
fi

if command -v codex-usage &>/dev/null || typeset -f codex-usage &>/dev/null || [[ -f ~/.config/zsh/functions/codex-usage ]]; then
  (( has_output )) && echo
  printf '\033[1;32m── Codex ───\033[0m\n'
  autoload -Uz codex-usage 2>/dev/null
  codex-usage
  has_output=1
fi

(( has_output )) || { echo "no usage tools available" >&2; return 1; }

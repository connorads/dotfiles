# cpcmd: ask Copilot for one command and paste it
emulate -L zsh
(( $+commands[copilot] )) || { print -u2 "copilot not found"; return 127; }
local q="$*"
if [[ -z "$q" ]]; then
  print -u2 "usage: cpcmd <task description>"
  return 1
fi

local cmd
cmd="$(copilot -p "Suggest a single zsh/bash command to: ${q}. Output ONLY the command. No backticks. No explanation.")"

# Insert into the current command line buffer
if [[ -n "$cmd" ]]; then
  print -z -- "$cmd"
fi
